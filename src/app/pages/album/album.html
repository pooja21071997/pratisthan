<div class="container py-5 album-view position-relative" *ngIf="album">
    <button class="back-btn" (click)="goBack()">
    <i class="fa-solid fa-arrow-left me-2"></i>
    Back
  </button>
  <!-- Album Title -->
  <h2 class="text-blue fw-bold mb-5 text-center album-title">
    {{ album.name }}
    <div class="line mx-auto"></div>
  </h2>

  <!-- If sub-albums exist -->
  <ng-container *ngIf="album.subAlbums?.length; else flatAlbum">
    <section *ngFor="let sub of album.subAlbums; let si = index">
      <h4 class="text-blue fw-bold mb-5 mt-5 sub-album-title">
        {{ sub.name }}
        <div class="line"></div>
      </h4>

      <div class="row g-4 photo-grid">
        <ng-container *ngFor="let photo of sub.photos; let pi = index; trackBy: trackByPhoto">
          <div
            class="col-lg-4 col-md-6"
            [style.animation-delay]="(pi * 0.12) + 's'"
          >
            <div class="photo-card enhanced-card">
              <div class="photo-glow"></div>
              <img
                [src]="photo"
                [alt]="sub.name + ' photo'"
                loading="lazy"
              />
            </div>
          </div>
        </ng-container>
      </div>
    </section>
  </ng-container>

  <!-- No sub-albums -->
  <ng-template #flatAlbum>
    <div class="row g-4 photo-grid">
      <ng-container *ngFor="let photo of album.photos; let i = index">
        <div
          class="col-lg-4 col-md-6"
          [style.animation-delay]="(i * 0.12) + 's'"
        >
          <div class="photo-card enhanced-card">
            <div class="photo-glow"></div>
            <img
              [src]="photo"
              [alt]="album.name + ' photo'"
              loading="lazy"
            />
          </div>
        </div>
      </ng-container>
    </div>
  </ng-template>
</div>
